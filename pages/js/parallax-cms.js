$(document).ready(function(){if($(window).width()>768){$window=$(window);$('[data-type]').each(function(){$(this).data('offsetY',parseInt($(this).attr('data-offsetY')));$(this).data('Xposition',$(this).attr('data-Xposition'));$(this).data('speed',$(this).attr('data-speed'));});$('[data-type="background"]').each(function(){var $self=$(this),offsetCoords=$self.offset(),topOffset=offsetCoords.top;$(window).scroll(function(){if(($window.scrollTop()+$window.height())>(topOffset)&&((topOffset+$self.height())>$window.scrollTop())){var yPos=-($window.scrollTop()/$self.data('speed'));if($self.data('offsetY')){yPos+=$self.data('offsetY');}var coords='50% '+yPos+'px';$self.css({backgroundPosition:coords});$('[data-type="sprite"]',$self).each(function(){var $sprite=$(this);var yPos=-($window.scrollTop()/$sprite.data('speed'));var coords=$sprite.data('Xposition')+' '+(yPos+$sprite.data('offsetY'))+'px';$sprite.css({backgroundPosition:coords});});$('[data-type="video"]',$self).each(function(){var $video=$(this);var yPos=-($window.scrollTop()/$video.data('speed'));var coords=(yPos+$video.data('offsetY'))+'px';$video.css({top:coords});});};});});$(window).scroll();}});if("ontouchstart"in window){document.documentElement.className=document.documentElement.className+" touch";}if(!$("html").hasClass("touch")){$(".parallax").css("background-attachment","fixed");}function fullscreenFix(){var h=$('body').height();$(".content-b").each(function(i){if($(this).innerHeight()<=h){$(this).closest(".fullscreen").addClass("not-overflow");}});}$(window).resize(fullscreenFix);fullscreenFix();function backgroundResize(){var windowH=$(window).height();$(".background").each(function(i){var path=$(this);var contW=path.width();var contH=path.height();var imgW=path.attr("data-img-width");var imgH=path.attr("data-img-height");var ratio=imgW/imgH;var diff=parseFloat(path.attr("data-diff"));diff=diff?diff:0;var remainingH=0;if(path.hasClass("parallax")&&!$("html").hasClass("touch")){var maxH=contH>windowH?contH:windowH;remainingH=windowH-contH;}imgH=contH+remainingH+diff;imgW=imgH*ratio;if(contW>imgW){imgW=contW;imgH=imgW/ratio;}path.data("resized-imgW",imgW);path.data("resized-imgH",imgH);path.css("background-size",imgW+"px "+imgH+"px");});}$(window).resize(backgroundResize);$(window).focus(backgroundResize);backgroundResize();function parallaxPosition(e){var heightWindow=$(window).height();var topWindow=$(window).scrollTop();var bottomWindow=topWindow+heightWindow;var currentWindow=(topWindow+bottomWindow)/2;$(".parallax").each(function(i){var path=$(this);var height=path.height();var top=path.offset().top;var bottom=top+height;if(bottomWindow>top&&topWindow<bottom){var imgW=path.data("resized-imgW");var imgH=path.data("resized-imgH");var min=0;var max=-imgH+heightWindow;var overflowH=height<heightWindow?imgH-height:imgH-heightWindow;top=top-overflowH;bottom=bottom+overflowH;var value=min+(max-min)*(currentWindow-top)/(bottom-top);var orizontalPosition=path.attr("data-oriz-pos");orizontalPosition=orizontalPosition?orizontalPosition:"50%";$(this).css("background-position",orizontalPosition+" "+value+"px");}});}if(!$("html").hasClass("touch")){$(window).resize(parallaxPosition);$(window).scroll(parallaxPosition);parallaxPosition();}